(this.webpackJsonpbandnames=this.webpackJsonpbandnames||[]).push([[0],{46:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var c,r=n(2),a=n(38),s=n.n(a),o=(n(46),n(9)),i=n(39),b=n(1),j=Object(r.createContext)(),d=function(e){var t=e.children,n=function(e){var t=Object(r.useMemo)((function(){return Object(i.io)(e,{transports:["websocket"]})}),[e]),n=Object(r.useState)(!1),c=Object(o.a)(n,2),a=c[0],s=c[1];return Object(r.useEffect)((function(){s(t.connect())}),[t]),Object(r.useEffect)((function(){t.on("connect",(function(){s(!0)}))}),[t]),Object(r.useEffect)((function(){t.on("disconnect",(function(){s(!1)}))}),[t]),{socket:t,online:a}}(e.serverPath),c=n.socket,a=n.online;return Object(b.jsx)(j.Provider,{value:{socket:c,online:a},children:t})},l=n(41),u=n(15),m=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useContext)(j).socket;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{children:"Agregar Banda"}),Object(b.jsx)("form",{onSubmit:function(e){var t;e.preventDefault(),n.trim().length>0&&(t=n,a.emit("add-new-band",{name:t}),c(""))},children:Object(b.jsx)("input",{className:"form-control",placeholder:"Nuevo nombre de banda",value:n,onChange:function(e){var t=e.target.value;c(t)}})})]})},O=n(40),x=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useContext)(j).socket;Object(r.useEffect)((function(){return a.on("current-band",(function(e){c(e)})),function(){return a.off("current-band")}}),[a]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{children:"Bandas Actuales"}),Object(b.jsxs)("table",{className:"table table-stripped",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{}),Object(b.jsx)("th",{children:"Nombre"}),Object(b.jsx)("th",{children:"Votos"}),Object(b.jsx)("th",{children:"Borrar"})]})}),Object(b.jsx)("tbody",{children:n.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsxs)("td",{children:[Object(b.jsx)("button",{className:"btn btn-dark me-2 mt-2",onClick:function(){return t=e.id,void a.emit("vote-band",t);var t},children:Object(b.jsx)(u.c,{style:{marginBottom:"1px",fontSize:"23px"}})}),Object(b.jsx)("button",{className:"btn btn-dark mt-2",onClick:function(){return t=e.id,void a.emit("unvote-band",t);var t},children:Object(b.jsx)(u.b,{style:{marginBottom:"1px",fontSize:"23px"}})})]}),Object(b.jsx)("td",{children:Object(b.jsx)("form",{onSubmit:function(t){var n,c;t.preventDefault(),n=e.id,c=e.name,a.emit("change-band-name",{id:n,name:c})},children:Object(b.jsx)("input",{className:"form-control",value:e.name,onChange:function(t){return function(e,t){var n=e.target.value;c((function(e){return e.map((function(e){return e.id===t&&(e.name=n),e}))}))}(t,e.id)}})})}),Object(b.jsxs)("td",{children:[" ",Object(b.jsxs)("h3",{children:[" ",e.votes," "]})," "]}),Object(b.jsx)("td",{children:Object(b.jsxs)("button",{className:"btn btn-outline-danger",onClick:function(){return t=e.id,void a.emit("delete-band",t);var t},children:[Object(b.jsx)(O.a,{style:{marginBottom:"5px"}})," Borrar"]})})]},e.id)}))})]})]})},h=n(3),f=n(16);f.a.register.apply(f.a,Object(h.a)(f.b));var v=function(){var e=Object(r.useContext)(j).socket;Object(r.useEffect)((function(){e.on("current-band",(function(e){t(e)}))}),[e]);var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=document.getElementById("myChart");"undefined"!==typeof c&&c.destroy(),c=new f.a(t,{type:"bar",data:{labels:e.map((function(e){return e.name})),datasets:[{label:"N\xfamero de Votos",data:e.map((function(e){return e.votes})),backgroundColor:["rgba(159, 81, 182, 0.2)","rgba(247, 194, 168, 0.2)","rgba(240, 120, 80, 0.2)","rgba(156, 221, 41, 0.2)","rgba(92, 119, 243, 0.2)"],borderColor:["rgba(159, 81, 182, 1)","rgba(247, 194, 168, 1)","rgba(240, 120, 80, 1)","rgba(156, 221, 41, 1)","rgba(92, 119, 243, 1)"],borderWidth:1}]},options:{animation:!1,indexAxis:"y",scales:{x:{beginAtZero:!0}}}})};return Object(b.jsx)("canvas",{id:"myChart"})},p=function(){var e=Object(r.useContext)(j).online;return Object(b.jsxs)("div",{className:"container mt-3 mb-5",children:[Object(b.jsx)("div",{className:"alert",style:{marginBottom:"-25px"},children:Object(b.jsxs)("p",{children:["Estado del servidor: ",e?Object(b.jsxs)("span",{className:"text-success",children:[" Online ",Object(b.jsx)(l.a,{})]}):Object(b.jsxs)("span",{className:"text-danger",children:[" Offline ",Object(b.jsx)(u.a,{})]})]})}),Object(b.jsx)("h1",{children:"Nombres de Bandas"}),Object(b.jsx)("hr",{}),Object(b.jsx)("div",{className:"row d-flex justify-content-center",children:Object(b.jsx)("div",{className:"col-md-8",children:Object(b.jsx)(v,{})})}),Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-8",children:Object(b.jsx)(x,{})}),Object(b.jsx)("div",{className:"col-md-4",children:Object(b.jsx)(m,{})})]})]})},g=function(){return Object(b.jsx)(d,{serverPath:"https://socket-bandname-server.herokuapp.com/",children:Object(b.jsx)(p,{})})};s.a.render(Object(b.jsx)(g,{}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.b661a19b.chunk.js.map